!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define("venn",["exports"],r):r(t.venn={})}(this,function(t){"use strict";function r(t,r,n,e){e=e||{};var a=e.maxIterations||100,i=e.tolerance||1e-10,s=t(r),u=t(n),o=n-r;if(s*u>0)throw"Initial bisect points must have opposite signs";if(0===s)return r;if(0===u)return n;for(var f=0;a>f;++f){o/=2;var l=r+o,h=t(l);if(h*s>=0&&(r=l),Math.abs(o)<i||0===h)return l}return r+o}function n(t){for(var r=new Array(t),n=0;t>n;++n)r[n]=0;return r}function e(t,r){return n(t).map(function(){return n(r)})}function a(t,r){for(var n=0,e=0;e<t.length;++e)n+=t[e]*r[e];return n}function i(t){return Math.sqrt(a(t,t))}function s(t,r){for(var n=0;n<t.length;++n)t[n]*=r}function u(t,r,n,e,a){for(var i=0;i<t.length;++i)t[i]=r*n[i]+e*a[i]}function o(t,r,n){n=n||{};var e,a=n.maxIterations||200*r.length,i=n.nonZeroDelta||1.1,s=n.zeroDelta||.001,o=n.minErrorDelta||1e-6,f=n.rho||1,l=n.chi||2,h=n.psi||-.5,x=n.sigma||.5,c=n.callback,g=r.length,v=new Array(g+1);v[0]=r,v[0].fx=t(r);for(var p=0;g>p;++p){var y=r.slice();y[p]=y[p]?y[p]*i:s,v[p+1]=y,v[p+1].fx=t(y)}for(var d=function(t,r){return t.fx-r.fx},m=r.slice(),M=r.slice(),z=r.slice(),I=r.slice(),w=0;a>w&&(v.sort(d),c&&c(v),!(Math.abs(v[0].fx-v[g].fx)<o));++w){for(p=0;g>p;++p){m[p]=0;for(var R=0;g>R;++R)m[p]+=v[R][p];m[p]/=g}var P=v[g];if(u(M,1+f,m,-f,P),M.fx=t(M),M.fx<=v[0].fx)u(I,1+l,m,-l,P),I.fx=t(I),I.fx<M.fx?(e=v[g],v[g]=I,I=e):(e=v[g],v[g]=M,M=e);else if(M.fx>=v[g-1].fx){var b=!1;if(M.fx<=P.fx?(u(z,1+h,m,-h,P),z.fx=t(z),z.fx<P.fx?(e=v[g],v[g]=z,z=e):b=!0):(u(z,1-h*f,m,h*f,P),z.fx=t(z),z.fx<=M.fx?(e=v[g],v[g]=z,z=e):b=!0),b)for(p=1;p<v.length;++p)u(v[p],1-x,v[0],x-1,v[p]),v[p].fx=t(v[p])}else e=v[g],v[g]=M,M=e}return v.sort(d),{f:v[0].fx,solution:v[0]}}function f(t,r,n){var e,o,f,h={x:r.slice(),fx:0,fxprime:r.slice()},x={x:r.slice(),fx:0,fxprime:r.slice()},c=r.slice(),g=1;n=n||{},f=n.maxIterations||5*r.length,h.fx=t(h.x,h.fxprime),e=h.fxprime.slice(),s(e,-1);for(var v=0;f>v;++v){if(n.history&&n.history.push({x:h.x.slice(),fx:h.fx,fxprime:h.fxprime.slice()}),g=l(t,e,h,x,g)){u(c,1,x.fxprime,-1,h.fxprime);var p=a(h.fxprime,h.fxprime),y=Math.max(0,a(c,x.fxprime)/p);u(e,y,e,-1,x.fxprime),o=h,h=x,x=o}else for(var d=0;d<e.length;++d)e[d]=-1*h.fxprime[d];if(i(h.fxprime)<=1e-5)break}return n.history&&n.history.push({x:h.x.slice(),fx:h.fx,fxprime:h.fxprime.slice()}),h}function l(t,r,n,e,i){function s(s,h,c){for(var g=0;16>g;++g)if(i=(s+h)/2,u(e.x,1,n.x,i,r),l=e.fx=t(e.x,e.fxprime),x=a(e.fxprime,r),l>o+B*i*f||l>=c)h=i;else{if(Math.abs(x)<=-H*f)return i;x*(h-s)>=0&&(h=s),s=i,c=l}return 0}var o=n.fx,f=a(n.fxprime,r),l=o,h=o,x=f,c=0;i=i||1;for(var g=0;10>g;++g){if(u(e.x,1,n.x,i,r),l=e.fx=t(e.x,e.fxprime),x=a(e.fxprime,r),l>o+B*i*f||g&&l>=h)return s(c,i,h);if(Math.abs(x)<=-H*f)return i;if(x>=0)return s(i,c,l);h=l,c=i,i*=2}return 0}function h(t,r){var n,e=c(t),a=e.filter(function(r){return x(r,t)}),i=0,s=0,u=[];if(a.length>1){var o=m(a);for(n=0;n<a.length;++n){var f=a[n];f.angle=Math.atan2(f.x-o.x,f.y-o.y)}a.sort(function(t,r){return r.angle-t.angle});var l=a[a.length-1];for(n=0;n<a.length;++n){var h=a[n];s+=(l.x+h.x)*(h.y-l.y);for(var g={x:(h.x+l.x)/2,y:(h.y+l.y)/2},y=null,d=0;d<h.parentIndex.length;++d)if(l.parentIndex.indexOf(h.parentIndex[d])>-1){var M=t[h.parentIndex[d]],z=Math.atan2(h.x-M.x,h.y-M.y),I=Math.atan2(l.x-M.x,l.y-M.y),w=I-z;0>w&&(w+=2*Math.PI);var R=I-w/2,P=p(g,{x:M.x+M.radius*Math.sin(R),y:M.y+M.radius*Math.cos(R)});(null===y||y.width>P)&&(y={circle:M,width:P,p1:h,p2:l})}u.push(y),i+=v(y.circle.radius,y.width),l=h}}else{var b=t[0];for(n=1;n<t.length;++n)t[n].radius<b.radius&&(b=t[n]);var A=!1;for(n=0;n<t.length;++n)if(p(t[n],b)>Math.abs(b.radius-t[n].radius)){A=!0;break}A?i=s=0:(i=b.radius*b.radius*Math.PI,u.push({circle:b,p1:{x:b.x,y:b.y+b.radius},p2:{x:b.x-J,y:b.y+b.radius},width:2*b.radius}))}return s/=2,r&&(r.area=i+s,r.arcArea=i,r.polygonArea=s,r.arcs=u,r.innerPoints=a,r.intersectionPoints=e),i+s}function x(t,r){for(var n=0;n<r.length;++n)if(p(t,r[n])>r[n].radius+J)return!1;return!0}function c(t){for(var r=[],n=0;n<t.length;++n)for(var e=n+1;e<t.length;++e)for(var a=d(t[n],t[e]),i=0;i<a.length;++i){var s=a[i];s.parentIndex=[n,e],r.push(s)}return r}function g(t,r){var n=Math.sqrt(t*t-r*r);return r*n+t*t*Math.atan2(r,n)}function v(t,r){return g(t,r-t)-g(t,-t)}function p(t,r){return Math.sqrt((t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y))}function y(t,r,n){if(n>=t+r)return 0;if(n<=Math.abs(t-r))return Math.PI*Math.min(t,r)*Math.min(t,r);var e=t-(n*n-r*r+t*t)/(2*n),a=r-(n*n-t*t+r*r)/(2*n);return v(t,e)+v(r,a)}function d(t,r){var n=p(t,r),e=t.radius,a=r.radius;if(n>=e+a||n<=Math.abs(e-a))return[];var i=(e*e-a*a+n*n)/(2*n),s=Math.sqrt(e*e-i*i),u=t.x+i*(r.x-t.x)/n,o=t.y+i*(r.y-t.y)/n,f=-(r.y-t.y)*(s/n),l=-(r.x-t.x)*(s/n);return[{x:u+f,y:o-l},{x:u-f,y:o+l}]}function m(t){for(var r={x:0,y:0},n=0;n<t.length;++n)r.x+=t[n].x,r.y+=t[n].y;return r.x/=t.length,r.y/=t.length,r}function M(t,r){r=r||{},r.maxIterations=r.maxIterations||500;var n=r.initialLayout||P;t=I(t);var e,a=n(t),i=[],s=[];for(e in a)a.hasOwnProperty(e)&&(i.push(a[e].x),i.push(a[e].y),s.push(e));for(var u=0,f=o(function(r){u+=1;for(var n={},e=0;e<s.length;++e){var i=s[e];n[i]={x:r[2*e],y:r[2*e+1],radius:a[i].radius}}return j(n,t)},i,r),l=f.solution,h=0;h<s.length;++h)e=s[h],a[e].x=l[2*h],a[e].y=l[2*h+1];return a}function z(t,n,e){return Math.min(t,n)*Math.min(t,n)*Math.PI<=e+K?Math.abs(t-n):r(function(r){return y(t,n,r)-e},0,t+n)}function I(t){t=t.slice();var r,n,e,a,i=[],s={};for(r=0;r<t.length;++r){var u=t[r];1==u.sets.length?i.push(u.sets[0]):2==u.sets.length&&(e=u.sets[0],a=u.sets[1],s[[e,a]]=!0,s[[a,e]]=!0)}for(i.sort(function(t,r){return t>r}),r=0;r<i.length;++r)for(e=i[r],n=r+1;n<i.length;++n)a=i[n],[e,a]in s||t.push({sets:[e,a],size:0});return t}function w(t,r,n){var a=e(r.length,r.length),i=e(r.length,r.length);return t.filter(function(t){return 2==t.sets.length}).map(function(t){var e=n[t.sets[0]],s=n[t.sets[1]],u=Math.sqrt(r[e].size/Math.PI),o=Math.sqrt(r[s].size/Math.PI),f=z(u,o,t.size);a[e][s]=a[s][e]=f;var l=0;t.size+1e-10>=Math.min(r[e].size,r[s].size)?l=1:t.size<=1e-10&&(l=-1),i[e][s]=i[s][e]=l}),{distances:a,constraints:i}}function R(t,r,n,e){var a,i=0;for(a=0;a<r.length;++a)r[a]=0;for(a=0;a<n.length;++a)for(var s=t[2*a],u=t[2*a+1],o=a+1;o<n.length;++o){var f=t[2*o],l=t[2*o+1],h=n[a][o],x=e[a][o],c=(f-s)*(f-s)+(l-u)*(l-u),g=Math.sqrt(c),v=c-h*h;x>0&&h>=g||0>x&&g>=h||(i+=2*v*v,r[2*a]+=4*v*(s-f),r[2*a+1]+=4*v*(u-l),r[2*o]+=4*v*(f-s),r[2*o+1]+=4*v*(l-u))}return i}function P(t,r){var n=A(t,r);if(t.length>=8){var e=b(t,r),a=j(e,t),i=j(n,t);i>a+1e-8&&(n=e)}return n}function b(t,r){r=r||{};var e,a=r.restarts||10,u=[],o={};for(e=0;e<t.length;++e){var l=t[e];1==l.sets.length&&(o[l.sets[0]]=u.length,u.push(l))}var h=w(t,u,o),x=h.distances,c=h.constraints,g=i(x.map(i))/x.length;x=x.map(function(t){return t.map(function(t){return t/g})});var v,p,y=function(t,r){return R(t,r,x,c)};for(e=0;a>e;++e){var d=n(2*x.length).map(Math.random);p=f(y,d,r),(!v||p.fx<v.fx)&&(v=p)}var m=v.x,M={};for(e=0;e<u.length;++e){var z=u[e];M[z.sets[0]]={x:m[2*e]*g,y:m[2*e+1]*g,radius:Math.sqrt(z.size/Math.PI)}}if(r.history)for(e=0;e<r.history.length;++e)s(r.history[e].x,g);return M}function A(t){function r(t,r){return r.size-t.size}function n(t){return t.set in v}function e(t,r){i[r].x=t.x,i[r].y=t.y,v[r]=!0}for(var a,i={},s={},u=0;u<t.length;++u){var o=t[u];1==o.sets.length&&(a=o.sets[0],i[a]={x:1e10,y:1e10,rowid:i.length,size:o.size,radius:Math.sqrt(o.size/Math.PI)},s[a]=[])}for(t=t.filter(function(t){return 2==t.sets.length}),u=0;u<t.length;++u){var f=t[u],l=f.hasOwnProperty("weight")?f.weight:1,h=f.sets[0],x=f.sets[1];f.size+K>=Math.min(i[h].size,i[x].size)&&(l=0),s[h].push({set:x,size:f.size,weight:l}),s[x].push({set:h,size:f.size,weight:l})}var c=[];for(a in s)if(s.hasOwnProperty(a)){var g=0;for(u=0;u<s[a].length;++u)g+=s[a][u].size*s[a][u].weight;c.push({set:a,size:g})}c.sort(r);var v={};for(e({x:0,y:0},c[0].set),u=1;u<c.length;++u){var p=c[u].set,y=s[p].filter(n);if(a=i[p],y.sort(r),0===y.length)throw"ERROR: missing pairwise overlap information";for(var m=[],M=0;M<y.length;++M){var I=i[y[M].set],w=z(a.radius,I.radius,y[M].size);m.push({x:I.x+w,y:I.y}),m.push({x:I.x-w,y:I.y}),m.push({y:I.y+w,x:I.x}),m.push({y:I.y-w,x:I.x});for(var R=M+1;R<y.length;++R)for(var P=i[y[R].set],b=z(a.radius,P.radius,y[R].size),A=d({x:I.x,y:I.y,radius:w},{x:P.x,y:P.y,radius:b}),O=0;O<A.length;++O)m.push(A[O])}var q=1e50,k=m[0];for(M=0;M<m.length;++M){i[p].x=m[M].x,i[p].y=m[M].y;var C=j(i,t);q>C&&(q=C,k=m[M])}e(k,p)}return i}function O(t){for(var r=[],n={},e=0;e<t.length;++e){var a=t[e];1==a.sets.length&&(n[a.sets[0]]=r.length,r.push(a))}var i=w(t,r,n).distances,s=mds.classic(i),u={};for(e=0;e<r.length;++e){var o=r[e];u[o.sets[0]]={x:s[e][0],y:s[e][1],radius:Math.sqrt(o.size/Math.PI)}}return u}function j(t,r){function n(r){return r.map(function(r){return t[r]})}for(var e=0,a=0;a<r.length;++a){var i,s=r[a];if(1!=s.sets.length){if(2==s.sets.length){var u=t[s.sets[0]],o=t[s.sets[1]];i=y(u.radius,o.radius,p(u,o))}else i=h(n(s.sets));var f=s.hasOwnProperty("weight")?s.weight:1;e+=f*(i-s.size)*(i-s.size)}}return e}function q(t,r,n){null===n?t.sort(function(t,r){return r.radius-t.radius}):t.sort(n);var e;if(t.length>0){var a=t[0].x,i=t[0].y;for(e=0;e<t.length;++e)t[e].x-=a,t[e].y-=i}if(t.length>1){var s,u,o=Math.atan2(t[1].x,t[1].y)-r,f=Math.cos(o),l=Math.sin(o);for(e=0;e<t.length;++e)s=t[e].x,u=t[e].y,t[e].x=f*s-l*u,t[e].y=l*s+f*u}if(t.length>2){for(var h=Math.atan2(t[2].x,t[2].y)-r;0>h;)h+=2*Math.PI;for(;h>2*Math.PI;)h-=2*Math.PI;if(h>Math.PI){var x=t[1].y/(1e-10+t[1].x);for(e=0;e<t.length;++e){var c=(t[e].x+x*t[e].y)/(1+x*x);t[e].x=2*c-t[e].x,t[e].y=2*c*x-t[e].y}}}}function k(t){function r(t){return t.parent!==t&&(t.parent=r(t.parent)),t.parent}function n(t,n){var e=r(t),a=r(n);e.parent=a}t.map(function(t){t.parent=t});for(var e=0;e<t.length;++e)for(var a=e+1;a<t.length;++a){var i=t[e].radius+t[a].radius;p(t[e],t[a])+1e-10<i&&n(t[a],t[e])}var s,u={};for(e=0;e<t.length;++e)s=r(t[e]).parent.setid,s in u||(u[s]=[]),u[s].push(t[e]);t.map(function(t){delete t.parent});var o=[];for(s in u)u.hasOwnProperty(s)&&o.push(u[s]);return o}function C(t){var r=function(r){var n=Math.max.apply(null,t.map(function(t){return t[r]+t.radius})),e=Math.min.apply(null,t.map(function(t){return t[r]-t.radius}));return{max:n,min:e}};return{xRange:r("x"),yRange:r("y")}}function F(t,r,n){function e(t,r,n){if(t){var e,a,i,u=t.bounds;r?e=l.xRange.max-u.xRange.min+h:(e=l.xRange.max-u.xRange.max-h,i=(u.xRange.max-u.xRange.min)/2-(l.xRange.max-l.xRange.min)/2,0>i&&(e+=i)),n?a=l.yRange.max-u.yRange.min+h:(a=l.yRange.max-u.yRange.max-h,i=(u.yRange.max-u.yRange.min)/2-(l.yRange.max-l.yRange.min)/2,0>i&&(a+=i));for(var o=0;o<t.length;++o)t[o].x+=e,t[o].y+=a,s.push(t[o])}}null===r&&(r=Math.PI/2);var a,i,s=[];for(i in t)if(t.hasOwnProperty(i)){var u=t[i];s.push({x:u.x,y:u.y,radius:u.radius,setid:i})}var o=k(s);for(a=0;a<o.length;++a){q(o[a],r,n);var f=C(o[a]);o[a].size=(f.xRange.max-f.xRange.min)*(f.yRange.max-f.yRange.min),o[a].bounds=f}o.sort(function(t,r){return r.size-t.size}),s=o[0];for(var l=s.bounds,h=(l.xRange.max-l.xRange.min)/50,x=1;x<o.length;)e(o[x],!0,!1),e(o[x+1],!1,!0),e(o[x+2],!0,!0),x+=3,l=C(s);var c={};for(a=0;a<s.length;++a)c[s[a].setid]=s[a];return c}function D(t,r,n,e){var a=[],i=[];for(var s in t)t.hasOwnProperty(s)&&(i.push(s),a.push(t[s]));r-=2*e,n-=2*e;for(var u=C(a),o=u.xRange,f=u.yRange,l=r/(o.max-o.min),h=n/(f.max-f.min),x=Math.min(h,l),c=(r-(o.max-o.min)*x)/2,g=(n-(f.max-f.min)*x)/2,v={},p=0;p<a.length;++p){var y=a[p];v[i[p]]={radius:x*y.radius,x:e+c+(y.x-o.min)*x,y:e+g+(y.y-f.min)*x}}return v}function T(){function t(t){var g=t.datum(),v=c(g);u&&(v=F(v,s,h));var p=D(v,n,e,a),y=N(p,g),d=t.selectAll("svg").data([p]);d.enter().append("svg"),d.attr("width",n).attr("height",e);var m={},M=!1;d.selectAll("g").each(function(t){var r=d3.select(this).select("path").attr("d");1==t.sets.length&&r&&(M=!0,m[t.sets[0]]=Z(r))});var z=function(t){return function(r){var a=t.sets.map(function(t){var a=m[t],i=p[t];return a||(a={x:n/2,y:e/2,radius:1}),i||(i={x:n/2,y:e/2,radius:1}),{x:a.x*(1-r)+i.x*r,y:a.y*(1-r)+i.y*r,radius:a.radius*(1-r)+i.radius*r}});return _(a)}},I=d.selectAll("g").data(g,function(t){return t.sets}),w=I.enter().append("g").attr("class",function(t){return"venn-area venn-"+(1==t.sets.length?"circle":"intersection")}).attr("data-venn-sets",function(t){return t.sets.join("_")}),R=w.append("path"),P=w.append("text").attr("class","label").text(function(t){return r(t)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",n/2).attr("y",e/2);f&&(R.style("fill-opacity","0").filter(function(t){return 1==t.sets.length}).style("fill",function(t){return x(r(t))}).style("fill-opacity",".25"),P.style("fill",function(t){return 1==t.sets.length?x(r(t)):"#444"}));var b=I.transition("venn").duration(M?i:0);b.select("path").attrTween("d",z);var A=b.select("text").text(function(t){return r(t)}).attr("x",function(t){return Math.floor(y[t.sets].x)}).attr("y",function(t){return Math.floor(y[t.sets].y)});o&&A.each("end",L(p,r));var O=I.exit().transition("venn").duration(i).remove();O.select("path").attrTween("d",z);var j=O.select("text").text(function(t){return r(t)}).attr("x",n/2).attr("y",e/2);return null!==l&&(P.style("font-size","0px"),A.style("font-size",l),j.style("font-size","0px")),{circles:p,textCentres:y,nodes:I,enter:w,update:b,exit:O}}function r(t){return t.label?t.label:1==t.sets.length?""+t.sets[0]:void 0}var n=600,e=350,a=15,i=1e3,s=Math.PI/2,u=!0,o=!0,f=!0,l=null,h=null,x=d3.scale.category10(),c=M;return t.wrap=function(r){return arguments.length?(o=r,t):o},t.width=function(r){return arguments.length?(n=r,t):n},t.height=function(r){return arguments.length?(e=r,t):e},t.padding=function(r){return arguments.length?(a=r,t):a},t.colours=function(r){return arguments.length?(x=r,t):x},t.fontSize=function(r){return arguments.length?(l=r,t):l},t.duration=function(r){return arguments.length?(i=r,t):i},t.layoutFunction=function(r){return arguments.length?(c=r,t):c},t.normalize=function(r){return arguments.length?(u=r,t):u},t.styled=function(r){return arguments.length?(f=r,t):f},t.orientation=function(r){return arguments.length?(s=r,t):s},t.orientationOrder=function(r){return arguments.length?(h=r,t):h},t}function L(t,r){return function(){for(var n,e=d3.select(this),a=e.datum(),i=t[a.sets[0]].radius||50,s=r(a)||"",u=s.split(/\s+/).reverse(),o=3,f=(s.length+u.length)/o,l=u.pop(),h=[l],x=0,c=1.1,g=e.text(null).append("tspan").text(l);;){if(l=u.pop(),!l)break;h.push(l),n=h.join(" "),g.text(n),n.length>f&&g.node().getComputedTextLength()>i&&(h.pop(),g.text(h.join(" ")),h=[l],g=e.append("tspan").text(l),x++)}var v=.35-x*c/2,p=e.attr("x"),y=e.attr("y");e.selectAll("tspan").attr("x",p).attr("y",y).attr("dy",function(t,r){return v+r*c+"em"})}}function S(t,r,n){var e,a,i=r[0].radius-p(r[0],t);for(e=1;e<r.length;++e)a=r[e].radius-p(r[e],t),i>=a&&(i=a);for(e=0;e<n.length;++e)a=p(n[e],t)-n[e].radius,i>=a&&(i=a);return i}function E(t,r){var n,e=[];for(n=0;n<t.length;++n){var a=t[n];e.push({x:a.x,y:a.y}),e.push({x:a.x+a.radius/2,y:a.y}),e.push({x:a.x-a.radius/2,y:a.y}),e.push({x:a.x,y:a.y+a.radius/2}),e.push({x:a.x,y:a.y-a.radius/2})}var i=e[0],s=S(e[0],t,r);for(n=1;n<e.length;++n){var u=S(e[n],t,r);u>=s&&(i=e[n],s=u)}var f=o(function(n){return-1*S({x:n[0],y:n[1]},t,r)},[i.x,i.y],{maxIterations:500,minErrorDelta:1e-10}).solution,l={x:f[0],y:f[1]},x=!0;for(n=0;n<t.length;++n)if(p(l,t[n])>t[n].radius){x=!1;break}for(n=0;n<r.length;++n)if(p(l,r[n])<r[n].radius){x=!1;break}if(!x)if(1==t.length)l={x:t[0].x,y:t[0].y};else{var c={};h(t,c),l=0===c.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==c.arcs.length?{x:c.arcs[0].circle.x,y:c.arcs[0].circle.y}:r.length?E(t,[]):m(c.arcs.map(function(t){return t.p1}))}return l}function G(t){var r={},n=[];for(var e in t)n.push(e),r[e]=[];for(var a=0;a<n.length;a++)for(var i=t[n[a]],s=a+1;s<n.length;++s){var u=t[n[s]],o=p(i,u);o+u.radius<=i.radius+1e-10?r[n[s]].push(n[a]):o+i.radius<=u.radius+1e-10&&r[n[a]].push(n[s])}return r}function N(t,r){for(var n={},e=G(t),a=0;a<r.length;++a){for(var i=r[a].sets,s={},u={},o=0;o<i.length;++o){s[i[o]]=!0;for(var f=e[i[o]],l=0;l<f.length;++l)u[f[l]]=!0}var h=[],x=[];for(var c in t)c in s?h.push(t[c]):c in u||x.push(t[c]);var g=E(h,x);n[i]=g,g.disjoint&&r[a].size>0&&console.log("WARNING: area "+i+" not represented on screen")}return n}function V(t,r){function n(t){for(var r=0;r<t.length;++r)if(!(t[r]in a))return!1;return!0}for(var e=G(t.selectAll("svg").datum()),a={},i=0;i<r.sets.length;++i){var s=r.sets[i];for(var u in e)for(var o=e[u],f=0;f<o.length;++f)if(o[f]==s){a[u]=!0;break}}t.selectAll("g").sort(function(t,e){return t.sets.length!=e.sets.length?t.sets.length-e.sets.length:t==r?n(e.sets)?-1:1:e==r?n(t.sets)?1:-1:e.size-t.size})}function W(t,r,n){var e=[];return e.push("\nM",t,r),e.push("\nm",-n,0),e.push("\na",n,n,0,1,0,2*n,0),e.push("\na",n,n,0,1,0,2*-n,0),e.join(" ")}function Z(t){var r=t.split(" ");return{x:parseFloat(r[1]),y:parseFloat(r[2]),radius:-parseFloat(r[4])}}function _(t){var r={};h(t,r);var n=r.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var e=n[0].circle;return W(e.x,e.y,e.radius)}for(var a=["\nM",n[0].p2.x,n[0].p2.y],i=0;i<n.length;++i){var s=n[i],u=s.circle.radius,o=s.width>u;a.push("\nA",u,u,0,o?1:0,1,s.p1.x,s.p1.y)}return a.join(" ")}var B=1e-6,H=.1,J=1e-10,K=1e-10,Q="0.2.8";t.version=Q,t.fmin=o,t.minimizeConjugateGradient=f,t.bisect=r,t.intersectionArea=h,t.circleCircleIntersection=d,t.circleOverlap=y,t.circleArea=v,t.distance=p,t.circleIntegral=g,t.venn=M,t.greedyLayout=A,t.classicMDSLayout=O,t.scaleSolution=D,t.normalizeSolution=F,t.bestInitialLayout=P,t.lossFunction=j,t.disjointCluster=k,t.distanceFromIntersectArea=z,t.VennDiagram=T,t.wrapText=L,t.computeTextCentres=N,t.computeTextCentre=E,t.sortAreas=V,t.circlePath=W,t.circleFromPath=Z,t.intersectionAreaPath=_});